<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://yamlscript.org/posts/advent-2023/dec-08/"><link href="/assets/main.7eeaf7bb0c5b5da98e70.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Going to the Library | YAMLScript</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Going to the Library"><meta property="og:site_name" content="YAMLScript"><meta property="og:type" content="website"><meta property="og:url" content="https://yamlscript.org/posts/advent-2023/dec-08/"><meta name="twitter:card" content="summary_large_image"><meta name="description" content="Going to the Library by Ingy döt Net | 08 Dec 2023 | 5 min read Programming in YAMLScript is as easy as reading a book. The only thing you..."><meta property="og:description" content="Going to the Library by Ingy döt Net | 08 Dec 2023 | 5 min read Programming in YAMLScript is as easy as reading a book. The only thing you..."><meta name="description" content="Going to the Library by Ingy döt Net | 08 Dec 2023 | 5 min read Programming in YAMLScript is as easy as reading a book. The only thing you..."><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/"><img src="/images/yamlscript.svg"></a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/about">About</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Going to the Library</h1><div class="post__details">by <a href="/about/#ingydotnet">Ingy döt Net</a> <span>| </span><time datetime="2023-12-08">08 Dec 2023 </time><span>| </span><span>5 min read</span></div></header><main class="post__content"><p>Programming in YAMLScript is as easy as reading a book. The only thing you really need is some good books! For that let's go to the library.</p><p>By books of course I mean YAMLScript functions. And by library I mean the YAMLScript Standard Library! There you'll find all-time best sellers like <code>map</code>, <code>filter</code>, <code>reduce</code> and <code>say</code>.</p><p>And Standard isn't the only Library in town...</p><h3>Welcome to Day 8 of the YAMLScript Advent Calendar</h3><p>In our YS programming so far, we've been using various functions like <code>say</code>, <code>take</code>, <code>keys</code>, <code>join</code> and <code>map</code>. Also we've been using various operators like <code>+</code>, <code>*</code>, <code>=&gt;</code> and <code>..</code>. Operators are just functions with names made out of punctuation characters.</p><p>Where do these functions come from? Are they built into the YAMLScript language?</p><p>Nope. They all come from the Library!</p><details><summary><strong style="color:brown">Libraries and Namespaces</strong></summary><p>It's probably a good idea to explain what a Clojure library is. And we should probably talk about namespaces too. Don't worry, it's quite simple.</p><p>A library is a file that contains a namespace and a bunch of functions (who belong to that library/namespace). The namespace name is made up of 2 or more words separated by the <code>.</code> character. The name corresponds to the file path of the library.</p><p>For example (in Clojure) the <code>foo.bar</code> library would contain a <code>foo.bar</code> namespace and be located at <code>foo/bar.clj</code> in your Java classpath. To access a function called <code>thinger</code> in <code>foo.bar</code>, you would use the fully qualified name (aka a Clojure symbol) <code>foo.bar/thinger</code>.</p><p>YAMLScript is the same except:</p><ul><li>File names end with <code>.ys</code></li><li>The 2 or more words are separated by <code>::</code> instead of <code>.</code></li><li>A fully qualified symbol looks like <code>foo::bar.thinger</code>.<ul><li>You'll find out later why this is really cool</li></ul></li></ul></details><p>The YAMLScript runtime has several libraries that are always available. The two primary ones are <code>clojure::core</code> and <code>ys::std</code>.</p><p>The <code>clojure::core</code> library is what YAMLScript calls Clojure's famous <code>clojure.core</code> library. In Clojure (and thus YAMLScript!) <code>clojure.core</code> is the heart and soul of the language. It's where all the Good Parts live. All of the functions (and macros) that you use constantly in your day-to-day programming.</p><p>How many publicly accessible functions does <code>clojure::core</code> give you? 581!!</p><p>How do I know that? YAMLScript just told me so:</p><pre class="language-bash"><code class="language-bash">$ ys <span class="token parameter variable">-pe</span> <span class="token string">'->(clojure::core quote find-ns ns-publics count)'</span><br><span class="token number">581</span></code></pre><p>That's a lot of functions!</p><details><summary><strong style="color:red">Why not 671?</strong></summary><p>Honestly it's not as many as the real <code>clojure.core</code> library called from Clojure.</p><pre class="language-bash"><code class="language-bash">$ clojure <span class="token parameter variable">-M</span> <span class="token parameter variable">-e</span> <span class="token string">'(-> clojure.core quote ns-publics count)'</span><br><span class="token number">671</span></code></pre><p>The reason for this is because YAMLScript uses a special version of Clojure the <a href="https://github.com/babashka/sci">SCI</a> (Small Clojure Interpreter).</p><p>SCI offers a subset of Clojure's functionality, but it's a very useful subset. It's also a &quot;safe&quot; subset.</p><p>I don't think you'll run into anything that's not available in your day to day YAMLScripting. If you do, give me a ring and we'll see what we can do to get it added.</p></details><p>The <code>clojure.core</code> library is very well documented so we won't talk about it more right now.</p><p>Let's discuss the other one I mentioned, <code>ys::std</code>. This is the YAMLScript Standard Library. It's where you'll find functions that make YS nicer to work with. The <code>say</code> function that shows up constantly is defined as <code>ys::std.say</code>.</p><p>How many functions does it offer?</p><pre class="language-bash"><code class="language-bash">$ YS <span class="token parameter variable">-pe</span> <span class="token string">'->(ys::std quote find-ns ns-publics count)'</span><br><span class="token number">17</span></code></pre><p>Not that many yet, but it is still being actively defined.</p><p>Here's a few of them:</p><ul><li><code>say</code> - A shorter way to say <code>println</code></li><li><code>warn</code> - Like <code>say</code> but prints to stderr</li><li><code>load</code> - Load an external YAMLScript file</li><li><code>=&gt;</code> - <code>=&gt;: 123</code> or <code>(=&gt; 123)</code> compiles to <code>123</code></li><li><code>pretty</code> - Pretty formats a data structure (without printing it)</li><li><code>toI</code>, <code>toS</code>, <code>toB</code> etc casting functions (Integer, String, Boolean)</li><li><code>_+</code> and <code>_*</code> - The polymorphic versions of <code>+</code> and <code>*</code> infix operators</li></ul><p>The <code>ys::std</code> library will certainly grow over time. Functions is this library use names that are not used by <code>clojure.core</code> functions.</p><h3>Other <code>ys::</code> Libraries</h3><p>There are currently 3 other <code>ys::</code> libraries that are always available.</p><ul><li><code>ys::yaml</code> - YAML <code>load</code> and <code>dump</code> functions</li><li><code>ys::json</code> - JSON <code>load</code> and <code>dump</code> functions</li><li><code>ys::ys</code> - <code>compile</code>, <code>eval</code> and <code>load</code> YS from within YS!</li></ul><p>For fun let's write a silly YS program that uses them.</p><p>Let's call it <code>silly.ys</code>:</p><pre class="language-yaml"><code class="language-yaml"><span class="token comment">#!/usr/bin/env ys-0</span><br><span class="token comment"># silly.ys</span><br><br><span class="token key atrule">my-yaml =</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"><br>  - Hello<br>  - Salutations<br>  - Ho Ho Ho<br>  - Merry Christmas<br>  - Happy Holidays<br>  - Seasons Greetings<br>  - Happy New Year<br>  - Happy Hanukkah<br>  - Happy Kwanzaa</span><br><br><span class="token key atrule">my-json =</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"><br>  [ "World",<br>    "Santa",<br>    "Elves",<br>    "Reindeer",<br>    "Snowman",<br>    "Mrs. Claus",<br>    "Rudolph",<br>    "Frosty",<br>    "Kids" ]</span><br><br><span class="token key atrule">greets =</span><span class="token punctuation">:</span> ys<span class="token punctuation">:</span><span class="token punctuation">:</span>yaml.load(my<span class="token punctuation">-</span>yaml)<br><br><span class="token key atrule">names =</span><span class="token punctuation">:</span> ys<span class="token punctuation">:</span><span class="token punctuation">:</span>json.load(my<span class="token punctuation">-</span>json)<br><br><span class="token key atrule">say</span><span class="token punctuation">:</span> <span class="token string">"$rand-nth(greets), $rand-nth(names)!!"</span></code></pre><p>Now let's run it a few times:</p><pre class="language-bash"><code class="language-bash">$ <span class="token keyword">for</span> <span class="token for-or-select variable">x</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token keyword">do</span> ys silly.ys<span class="token punctuation">;</span> <span class="token keyword">done</span><br>Happy Holidays, Kids<span class="token operator">!</span><span class="token operator">!</span><br>Hello, World<span class="token operator">!</span><span class="token operator">!</span><br>Happy New Year, World<span class="token operator">!</span><span class="token operator">!</span><br>Hello, Rudolph<span class="token operator">!</span><span class="token operator">!</span><br>Salutations, Santa<span class="token operator">!</span><span class="token operator">!</span><br>Salutations, Mrs. Claus<span class="token operator">!</span><span class="token operator">!</span><br>Happy Hanukkah, Mrs. Claus<span class="token operator">!</span><span class="token operator">!</span><br>Merry Christmas, Santa<span class="token operator">!</span><span class="token operator">!</span><br>Ho Ho Ho, Rudolph<span class="token operator">!</span><span class="token operator">!</span><br>Hello, Elves<span class="token operator">!</span><span class="token operator">!</span></code></pre><p>That's a lot of fun! We wrote a program in YAML to play with some YAML that was inside the YAML!</p><p>I hope you're starting to see the power of YAMLScript, and I hope you have a wonderful day.</p><p>Full disclosure: I'm stuck in the Winnipeg airport, writing this and hacking on YAMLScript because my flight's toilets stopped working and they decided to land here for the night. True story.</p><p>Tune in tomorrow for Day 9 of the YAMLScript Advent Calendar.</p><p>&nbsp;</p><details><summary style="color:#888">Santa's little secrets...</summary><p>In December 2023 YAMLScript is a work in progress.</p><p>This is not to say that it's a toy proof of concept. It has a working compiler, runtime and CLI. It has unit tests that must pass for every commit pushed to the main branch. It's well thought out and has a clear direction that I continually vet with a small group of talented and trusted people. It has regular <a href="https://github.com/yaml/yamlscript/releases">releases</a>.</p><p>But that in turn not to say that you should use it in production today. I encourage you to start playing with it, and I'm committed to backwards compatibility for stable releases. But we're not quite there yet. Caveat usor!</p><p>YAMLScript is evolving fast. While I'm writing these posts, I'm also writing the code for new features and fixing bugs as I go. I've had the Advent plan for over a month now, and I had planned to be further along before December 1st, but such are the time estimates of hackers.</p><p>I am attempting to make sure that the code examples in these posts are always using the implemented features, but sometimes I may fall a few hours behind. Often I need to write the examples using code patterns that actually work but are not the ones I preferred to best make a point.</p><p>As I fix bugs, implement features and tweak the language, I will update the posts accordingly. If you see something that bugs you, try taking another look after a few days. It probably bugged me too!</p><p>Be patient with me.</p><p>If I had to guess, I'd say that YAMLScript v0 will be have a stable release sometime before March 2024. I'll continue blogging the progress as I go, so it shouldn't be hard for you to decide when to start using YAMLScript for real.</p><p>Overall the whole thing is going extremely well, and I'm having a lot of fun. It's important to be transparent with you about where things are at.</p><p>Stick with me... This is going to be awesome!</p><p>— Ingy döt Net</p></details></main><aside class="post__aside"><div class="post__tags"><a href="/tags/blog/">#blog</a> <a href="/tags/advent-2023/">#advent-2023</a></div><nav class="post__pagination"><a href="/posts/advent-2023/dec-07/"><span>←</span> <span>Sharpen Your Tools</span> </a><a href="/posts/advent-2023/dec-09/"><span>Coding with Style</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a href="https://github.com/yaml/yamlscript" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><p class="footer__attribution">Powered by <a href="https://www.11ty.dev" target="_blank" rel="noopener">Eleventy</a>. Theme: <a href="https://github.com/yinkakun/eleventy-duo" target="_blank" rel="noopener noreferrer">Eleventy Duo</a>.</p></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>