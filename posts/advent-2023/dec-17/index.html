<!doctype html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-44C9DS3Q80"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-44C9DS3Q80');</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://yamlscript.org/posts/advent-2023/dec-17/"><link href="/assets/main.7eeaf7bb0c5b5da98e70.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>Rosetta Code | YAMLScript</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="Rosetta Code"><meta property="og:site_name" content="YAMLScript"><meta property="og:type" content="website"><meta property="og:url" content="https://yamlscript.org/posts/advent-2023/dec-17/"><meta name="twitter:card" content="summary_large_image"><meta name="description" content="Rosetta Code by Ingy döt Net | 17 Dec 2023 | 3 min read How does Santa read all the signs in all the languages of the world? That&#39;s a lot of..."><meta property="og:description" content="Rosetta Code by Ingy döt Net | 17 Dec 2023 | 3 min read How does Santa read all the signs in all the languages of the world? That&#39;s a lot of..."><meta name="description" content="Rosetta Code by Ingy döt Net | 17 Dec 2023 | 3 min read How does Santa read all the signs in all the languages of the world? That&#39;s a lot of..."><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/"><img src="/images/yamlscript.svg"></a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/about">About</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>Rosetta Code</h1><div class="post__details">by <a href="/about/#ingydotnet">Ingy döt Net</a> <span>| </span><time datetime="2023-12-17">17 Dec 2023 </time><span>| </span><span>3 min read</span></div></header><main class="post__content"><p>How does Santa read all the signs in all the languages of the world? That's a lot of languages to know on top of all the other things he has to do. Luckily he has his trusty polyglot elf, Rosetta, at his side. Bet you didn't know that!</p><h3>Welcome to Day 17 of the YAMLScript Advent Calendar</h3><p>A cool guy named Mike Mol made a website called <a href="https://rosettacode.org/wiki/Rosetta_Code">Rosetta Code</a> for programmers who want to learn all the programming languages of the world!</p><p>It's a wiki that has well over 1000 programming tasks and almost 1000 programming languages. The idea is for people to contribute solutions to the tasks in as many languages as they can.</p><p>I've been a fan of Rosetta Code for years. Here's one of my all time favorite programs from the site: <a href="https://rosettacode.org/wiki/FizzBuzz/EsoLang#SNUSP">FizzBuzz in SNUSP</a>!!</p><p>One thing people like to use Rosetta Code for is to show off a new language. YAMLScript is a new language, and I've put a few solutions up there myself:</p><ul><li><a href="https://rosettacode.org/wiki/99_Bottles_of_Beer#YAMLScript">99 Bottles of Beer</a></li><li><a href="https://rosettacode.org/wiki/FizzBuzz#YAMLScript">FizzBuzz</a></li><li><a href="https://rosettacode.org/wiki/Hello_world/Text#YAMLScript">Hello world/Text</a></li><li><a href="https://rosettacode.org/wiki/Factorial#YAMLScript">Factorial</a></li><li><a href="https://rosettacode.org/wiki/Fibonacci_sequence#YAMLScript">Fibonacci sequence</a></li></ul><p>Adding solutions to Rosetta Code is a one of the best ways I've found to figure out what YAMLScript needs to do and what it needs to do better.</p><h3>Rosetta Code Data</h3><p>The Rosetta Code website is a great resource, but it's a bit clunky to use. It would be really cool if all the code examples were available in a nice Git repository.</p><p>Well, it turns out that they are! You can clone over 100,000 code examples in a few seconds by running this command:</p><pre class="language-bash"><code class="language-bash">$ <span class="token function">git</span> clone https://github.com/acmeism/RosettaCodeData<br>$ <span class="token builtin class-name">cd</span> RosettaCodeData<br>$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> Lang/YAMLScript/<br>total <span class="token number">8</span><br>00-<span class="token environment constant">LANG</span>.txt<br>00-META.yaml<br><span class="token number">99</span>-bottles-of-beer -<span class="token operator">></span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>/Task/99-bottles-of-beer/YAMLScript/<br>Factorial -<span class="token operator">></span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>/Task/Factorial/YAMLScript/<br>Fibonacci-sequence -<span class="token operator">></span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>/Task/Fibonacci-sequence/YAMLScript/<br>FizzBuzz -<span class="token operator">></span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>/Task/FizzBuzz/YAMLScript/<br>Hello-world-Text -<span class="token operator">></span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>/Task/Hello-world-Text/YAMLScript/</code></pre><p>The Rosetta Code Data Project is something I wrote almost 15 years ago. This last summer I was able to make it a lot easier to update.</p><p>Let's try out the FizzBuzz example:</p><pre class="language-bash"><code class="language-bash">$ ys Task/FizzBuzz/YAMLScript/fizzbuzz.ys <span class="token number">16</span><br><span class="token number">1</span><br><span class="token number">2</span><br>Fizz<br><span class="token number">4</span><br>Buzz<br>Fizz<br><span class="token number">7</span><br><span class="token number">8</span><br>Fizz<br>Buzz<br><span class="token number">11</span><br>Fizz<br><span class="token number">13</span><br><span class="token number">14</span><br>FizzBuzz<br><span class="token number">16</span></code></pre><p>Pretty cool, huh?</p><h3>RC Needs More YS!</h3><p>Let's try adding a new YAMLScript solution to Rosetta Code.</p><p>The first thing to do is to find a task that doesn't have a YAMLScript solution yet. You can find all the tasks listed <a href="https://rosettacode.org/wiki/Category:Programming_Tasks">here</a>.</p><p>Let's take the first one: <a href="https://rosettacode.org/wiki/100_doors">100 doors</a>.</p><p>What I like to do next is cheat! Clojure has solved most of the tasks on Rosetta Code, and YAMLScript is another way to write Clojure, so let's just pick a Clojure solution and translate it to YAMLScript.</p><pre class="language-clojure"><code class="language-clojure"><span class="token punctuation">(</span><span class="token keyword">defn</span> doors <span class="token punctuation">[</span><span class="token punctuation">]</span><br>	<span class="token punctuation">(</span><span class="token keyword">reduce</span> <span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">[</span>doors idx<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">assoc</span> doors idx <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>	        <span class="token punctuation">(</span><span class="token keyword">into</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">repeat</span> <span class="token number">100</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>	        <span class="token punctuation">(</span><span class="token keyword">map</span> <span class="token operator">#</span><span class="token punctuation">(</span><span class="token keyword">dec</span> <span class="token punctuation">(</span><span class="token keyword">*</span> % %<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">range</span> <span class="token number">1</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token punctuation">(</span><span class="token keyword">defn</span> open-doors <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">for</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>d n<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">map</span> vector <span class="token punctuation">(</span><span class="token function">doors</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">iterate</span> inc <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token symbol">:when</span> d<span class="token punctuation">]</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token punctuation">(</span><span class="token keyword">defn</span> print-open-doors <span class="token punctuation">[</span><span class="token punctuation">]</span><br>  <span class="token punctuation">(</span><span class="token keyword">println</span><br>    <span class="token string">"Open doors after 100 passes:"</span><br>    <span class="token punctuation">(</span><span class="token keyword">apply</span> str <span class="token punctuation">(</span><span class="token function">interpose</span> <span class="token string">", "</span> <span class="token punctuation">(</span><span class="token function">open-doors</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token punctuation">(</span><span class="token function">print-open-doors</span><span class="token punctuation">)</span></code></pre><p>Here's a quick translation to YAMLScript:</p><pre class="language-yaml"><code class="language-yaml"><span class="token tag">!yamlscript/v0</span><br><br><span class="token key atrule">defn doors()</span><span class="token punctuation">:</span><br>  <span class="token key atrule">reduce</span><span class="token punctuation">:</span><br>    fn <span class="token punctuation">[</span>doors idx<span class="token punctuation">]</span><span class="token punctuation">:</span> assoc(doors idx true)<br>    into <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">:</span> repeat(100 false)<br>    <span class="token key atrule">map \(dec (% * %))</span><span class="token punctuation">:</span> (1 .. 10)<br><br><span class="token key atrule">defn open-doors()</span><span class="token punctuation">:</span><br>  <span class="token key atrule">for</span><span class="token punctuation">:</span> .<span class="token punctuation">[</span><span class="token punctuation">[</span>d n<span class="token punctuation">]</span> map(vector doors() iterate(inc 1)) <span class="token punctuation">:</span>when d<span class="token punctuation">]</span> n<br><br><span class="token key atrule">defn print-open-doors()</span><span class="token punctuation">:</span><br>  <span class="token key atrule">say</span><span class="token punctuation">:</span><br>    "Open doors after 100 passes<span class="token punctuation">:</span><br>    $(apply str interpose(\"<span class="token punctuation">,</span> \" open<span class="token punctuation">-</span>doors()))"<br><br><span class="token key atrule">=></span><span class="token punctuation">:</span> print<span class="token punctuation">-</span>open<span class="token punctuation">-</span>doors()</code></pre><p>Let's see if it works:</p><pre class="language-bash"><code class="language-bash">$ ys <span class="token number">100</span>-doors.ys<br>Open doors after <span class="token number">100</span> passes: <span class="token number">1</span>, <span class="token number">4</span>, <span class="token number">9</span>, <span class="token number">16</span>, <span class="token number">25</span>, <span class="token number">36</span>, <span class="token number">49</span>, <span class="token number">64</span>, <span class="token number">81</span>, <span class="token number">100</span></code></pre><p>Great! Now let's clean it up a bit:</p><p>I'm just going to rename the <code>print-open-doors</code> function to <code>main</code> and move it to the top of the file. The <code>main</code> function (if defined) is called automatically when the script is run.</p><pre class="language-yaml"><code class="language-yaml"><span class="token tag">!yamlscript/v0</span><br><br><span class="token key atrule">defn main()</span><span class="token punctuation">:</span><br>  <span class="token key atrule">say</span><span class="token punctuation">:</span><br>    "Open doors after 100 passes<span class="token punctuation">:</span><br>    $(apply str interpose(\"<span class="token punctuation">,</span> \" open<span class="token punctuation">-</span>doors()))"<br><br><span class="token key atrule">defn open-doors()</span><span class="token punctuation">:</span><br>  <span class="token key atrule">for</span><span class="token punctuation">:</span> .<span class="token punctuation">[</span><span class="token punctuation">[</span>d n<span class="token punctuation">]</span> map(vector doors() iterate(inc 1)) <span class="token punctuation">:</span>when d<span class="token punctuation">]</span> n<br><br><span class="token key atrule">defn doors()</span><span class="token punctuation">:</span><br>  <span class="token key atrule">reduce</span><span class="token punctuation">:</span><br>    fn <span class="token punctuation">[</span>doors idx<span class="token punctuation">]</span><span class="token punctuation">:</span> assoc(doors idx true)<br>    into <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">:</span> repeat(100 false)<br>    <span class="token key atrule">map \(dec (% * %))</span><span class="token punctuation">:</span> 1..10</code></pre><p>I also ordered the functions top-down in the order they are called since we know that YAMLScript will auto-declare them in the generated Clojure code.</p><pre class="language-bash"><code class="language-bash">$ <span class="token function">time</span> ys <span class="token number">100</span>-doors.ys<br>Open doors after <span class="token number">100</span> passes: <span class="token number">1</span>, <span class="token number">4</span>, <span class="token number">9</span>, <span class="token number">16</span>, <span class="token number">25</span>, <span class="token number">36</span>, <span class="token number">49</span>, <span class="token number">64</span>, <span class="token number">81</span>, <span class="token number">100</span><br><br>real    0m0.041s</code></pre><p>Still works! Pretty fast too! Let's add it to Rosetta Code!</p><p>To do this you need to create an account on the site, login, and then click the &quot;Edit&quot; tab on the task page. It's a pretty terrible plain text editor, but scroll way down to where the YAMLScript solutions should go and add this:</p><pre class="language-text"><code class="language-text">=={&lcub;header|YAMLScript}}==<br>&lt;syntaxhighlight lang="yaml"><br>!yamlscript/v0<br><br>defn main():<br>  say:<br>    "Open doors after 100 passes:<br>    $(apply str interpose(\", \" open-doors()))"<br><br>defn open-doors():<br>  for: .[[d n] map(vector doors() iterate(inc 1)) :when d] n<br><br>defn doors():<br>  reduce:<br>    fn [doors idx]: assoc(doors idx true)<br>    into []: repeat(100 false)<br>    map \(dec (% * %)): 1..10<br>&lt;/syntaxhighlight><br>{&lcub;out}}<br>&lt;pre><br>$ ys 100-doors.ys<br>Open doors after 100 passes: 1, 4, 9, 16, 25, 36, 49, 64, 81, 100<br>&lt;/pre></code></pre><p>Click &quot;Save changes&quot; and you're done!</p><ul><li><a href="https://rosettacode.org/wiki/100_doors#YAMLScript">https://rosettacode.org/wiki/100_doors#YAMLScript</a></li><li><a href="https://github.com/acmeism/RosettaCodeData/blob/main/Task/100-doors/YAMLScript/100-doors.ys">https://github.com/acmeism/RosettaCodeData/blob/main/Task/100-doors/YAMLScript/100-doors.ys</a><ul><li>I updated the repo (not automatic yet)</li></ul></li></ul><p><strong>We did it!</strong></p><hr><p>Don't wait for me to add more YAMLScript solutions to Rosetta Code. You can do it yourself! If you do, send me (<code>@ingydotnet</code>) a DM on the <a href="https://discord.com/channels/1011262808001880065/">Rosetta Code Discord</a> server and I'll update the Rosetta Code Data Project repo with your solutions.</p><p>If you had never heard of Rosetta Code before, I hope you'll find it as interesting as I do.</p><p>Check back tomorrow for Day 18 of the YAMLScript Advent Calendar!</p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/blog/">#blog</a> <a href="/tags/advent-2023/">#advent-2023</a></div><nav class="post__pagination"><a href="/posts/advent-2023/dec-16/"><span>←</span> <span>Let Lambda Come Over</span> </a><a href="/posts/advent-2023/dec-18/"><span>Santa&#39;s in d&#39;buggy</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a href="https://github.com/yaml/yamlscript" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><p class="footer__attribution">Powered by <a href="https://www.11ty.dev" target="_blank" rel="noopener">Eleventy</a>. Theme: <a href="https://github.com/yinkakun/eleventy-duo" target="_blank" rel="noopener noreferrer">Eleventy Duo</a>.</p></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>