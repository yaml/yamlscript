<!doctype html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-44C9DS3Q80"></script><script>window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-44C9DS3Q80');</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://yamlscript.org/posts/mar-14-2024/"><link href="/assets/main.568c13b05248bebc365e.css" rel="stylesheet"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"><title>YAMLScript Firsts | YAMLScript</title><link rel="icon" type="“image/x-icon”" href="/images/favicon.ico"><meta property="og:title" content="YAMLScript Firsts"><meta property="og:site_name" content="YAMLScript"><meta property="og:type" content="website"><meta property="og:url" content="https://yamlscript.org/posts/mar-14-2024/"><meta name="twitter:card" content="summary_large_image"><meta name="description" content="YAMLScript Firsts by Ingy döt Net | 14 Mar 2024 | 3 min read Remember Your First Time? Do you remember the first time you wrote a program in..."><meta property="og:description" content="YAMLScript Firsts by Ingy döt Net | 14 Mar 2024 | 3 min read Remember Your First Time? Do you remember the first time you wrote a program in..."><meta name="description" content="YAMLScript Firsts by Ingy döt Net | 14 Mar 2024 | 3 min read Remember Your First Time? Do you remember the first time you wrote a program in..."><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad:true});</script></head><body><div class="layout-wrapper"><header class="header"><div class="header__content"><h1 class="site-title"><a href="/"><img src="/images/yamlscript.svg"></a></h1><nav class="nav"><ul class="nav__list"><li class="nav-item"><a href="/doc">Docs</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="/about">About</a></li></ul></nav></div></header><main class="main"><article class="post"><header class="post__header"><h1>YAMLScript Firsts</h1><div class="post__details">by <a href="/about/#ingydotnet">Ingy döt Net</a> <span>| </span><time datetime="2024-03-14">14 Mar 2024 </time><span>| </span><span>3 min read</span></div></header><main class="post__content"><h3>Remember Your First Time?</h3><p>Do you remember the first time you wrote a program in a new language? For YAMLScript, mine was yesterday!</p><p>This is my first post of 2024. I've been working on YAMLScript non-stop since the last <a href="/posts/advent-2023/index/">YAMLScript Advent 2023</a> post. Too busy to write a blog post, I guess.</p><p>Yesterday something awesome happened.</p><p>Putting out a YAMLScript release is a complicated process. It takes me about an hour to do it. Of course I plan to automate it fully but I just haven't had the tuits.</p><p>For the last several releases, I've had a text file that listed all the steps so that I wouldn't forget anything. Yesterday I automated that list...</p><p>...you guessed it...</p><p>...in YAMLScript!</p><h3>The 10 Step Program</h3><p>Of course I have been writing test programs in YAMLScript for a while now. This was the first time that I wrote a YAMLScript program that actually does something I need to do on a regular basis.</p><p>Without further ado, here is the <a href="https://github.com/yaml/yamlscript/blob/29996dd705/util/release-yamlscript">YAMLScript Release Automation Program</a>.</p><p>It's a 10 step program that does everything I used to do manually. I think it turned out pretty nice.</p><p>Judge for yourself but let me tell you a bit about it first.</p><ul><li>There are 10 steps to perform.</li><li>If a step fails you can run it again.</li><li>You can indicate which steps to start and end at.</li><li>Reports information about each step as it goes.</li><li>Has a verbose mode that shows you what it has done to various files.</li><li>Has a dry-run mode that shows you what it would do without doing anything.</li><li>Validates its inputs and tries to doublecheck its work.</li><li>Everything is broken up into short and simple functions.</li><li>Execution starts with the main function at the top.</li><li>Shells out to common CLI commands to get things done.</li><li>Uses multiline literal scalars with interpolation to make changelog entries.</li><li>Fairly well documented internally with comments.</li></ul><p>It's pretty much like a shell script, but written in YAMLScript. Given that YAMLScript is a functional language with immutable data, perhaps it's more reliable than a shell script. Time will tell.</p><p>I also added a Makefile rule to run the program. It supports several variables to control the program and writes the output to stdout and a log file.</p><p>Here's the output from a dry-run:</p><pre class="language-bash"><code class="language-bash">$ <span class="token function">make</span> release-yamlscript <span class="token assign-left variable">o</span><span class="token operator">=</span><span class="token number">0.1</span>.42 <span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token number">0.1</span>.43 <span class="token assign-left variable">v</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">d</span><span class="token operator">=</span><span class="token number">1</span><br>./util/release-yamlscript <span class="token number">0.1</span>.42 <span class="token number">0.1</span>.43  <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">tee</span> <span class="token parameter variable">-a</span> release-0.1.43.log<br><br>Releasing YAMLScript v0.1.43 at Thu Mar <span class="token number">14</span> 07:28:19 AM PDT <span class="token number">2024</span><br><br><br>Step <span class="token number">1</span><span class="token punctuation">)</span> Update <span class="token string">'.version.sh'</span> <span class="token function">file</span><br>+ <span class="token function">git</span> <span class="token parameter variable">-P</span> <span class="token function">diff</span> .version.sh<br><br>Step <span class="token number">2</span><span class="token punctuation">)</span> Run <span class="token string">'make bump'</span><br>+ <span class="token function">make</span> bump<br>+ <span class="token function">git</span> <span class="token parameter variable">-P</span> <span class="token function">diff</span><br><br>Step <span class="token number">3</span><span class="token punctuation">)</span> Update the <span class="token string">'Changes'</span> <span class="token function">file</span><br>+ <span class="token function">grep</span> <span class="token parameter variable">-F</span> <span class="token parameter variable">-B999</span> <span class="token string">'0.1.42'</span> Changes<br><br>Step <span class="token number">4</span><span class="token punctuation">)</span> Update the Change Log files <span class="token keyword">for</span> the binding modules<br><br>Step <span class="token number">5</span><span class="token punctuation">)</span> Commit the release changes to <span class="token function">git</span><br>+ <span class="token function">git</span> commit <span class="token parameter variable">-a</span> <span class="token parameter variable">-m</span> <span class="token string">'release: 0.1.43'</span><br><br>Step <span class="token number">6</span><span class="token punctuation">)</span> Add <span class="token function">git</span> tag <span class="token keyword">for</span> the new version<br>+ <span class="token function">git</span> tag <span class="token number">0.1</span>.43<br><br>Step <span class="token number">7</span><span class="token punctuation">)</span> Push the <span class="token function">git</span> commit and tag<br>+ <span class="token function">git</span> push<br>+ <span class="token function">git</span> push <span class="token parameter variable">--tags</span><br><br>Step <span class="token number">8</span><span class="token punctuation">)</span> Run <span class="token string">'make release'</span><br>+ <span class="token function">make</span> release<br><br>Step <span class="token number">9</span><span class="token punctuation">)</span> Run <span class="token string">'make release'</span> <span class="token keyword">for</span> each language binding library<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> clojure release<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> go release<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> <span class="token function">java</span> release<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> julia release<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> nodejs release<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> perl release<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> perl-alien release<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> python release<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> raku release<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> ruby release<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> rust release<br>+ <span class="token function">git</span> <span class="token parameter variable">-P</span> <span class="token function">diff</span><br><br>Step <span class="token number">10</span><span class="token punctuation">)</span> Publish the yamlscript.org website<br>+ <span class="token function">make</span> <span class="token parameter variable">-C</span> www realclean publish</code></pre><p>Maybe it's time for you to write your first YAMLScript program!</p><p>If you do, drop me a line and tell me how it went. YS is still a young language and I'm always looking for feedback.</p><h3>Other Firsts</h3><p>Last Monday someone published the <a href="https://thenewstack.io/with-yamlscript-yaml-becomes-a-proper-programming-language/">first article about YAMLScript</a>.</p><p>It was based on YAML core team member <a href="https://github.com/perlpunk">Tina Müller</a>'s <a href="https://fosdem.org/2024/schedule/event/fosdem-2024-2046-do-you-know-yaml-/">recent talk about YAML</a> at the <a href="https://fosdem.org/2024/">FOSDEM 2024</a> which had a section about YAMLScript.</p><p>The article was accurate and well researched which is a rare thing for YAML in my experience.</p><p>Also last week I gave the first 2024 public talk about YAMLScript at the <a href="https://www.meetup.com/seajure/events/299251467/">Seajure Meetup</a> in Seattle. Seajure is a Seattle based Clojure meetup that I started attending last year. The talk was well received and I got some good feedback. The video should be available soon.</p><p>Next month YAMLScript will be presented at its <a href="https://ossna2024.sched.com/event/1aBPY">first conference talk of 2024</a> at the <a href="https://events.linuxfoundation.org/open-source-summit-north-america/">Linux Foundation's Open Source Summit North America</a>. I hope to see you there!</p><h3>Future Firsts</h3><p>There's a few big things in the works for YAMLScript this year worth mentioning:</p><ul><li>A YAML Schema DSL that will be used to validate YAMLScript evaluation results.</li><li>Compiler source maps for IDE integration and better error messages.</li><li>YAMLScript User Documentation (finally).</li></ul><p>I'll be back here next week to tell you about all the things that have happened with YAMLScript in the last 3 months. So much good stuff. Stay tuned!</p><p>YS We Can! — Ingy döt Net</p></main><aside class="post__aside"><div class="post__tags"><a href="/tags/blog/">#blog</a></div><nav class="post__pagination"><a href="/posts/advent-2023/index/"><span>←</span> <span>2023 Advent Index</span> </a><a href="/posts/apr-16-2024/"><span>YAMLScript Spring Update</span> <span>→</span></a></nav></aside></article></main><footer class="footer"><div class="footer__content"><ul class="hero__social-links"><li><a href="https://github.com/yaml/yamlscript" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="/feed.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><p class="footer__attribution">Powered by <a href="https://www.11ty.dev" target="_blank" rel="noopener">Eleventy</a>. Theme: <a href="https://github.com/yinkakun/eleventy-duo" target="_blank" rel="noopener noreferrer">Eleventy Duo</a>.</p></div></footer></div><script src="/assets/main.31d6cfe0d16ae931b73c.js"></script></body></html>